#!/usr/bin/env bash
set -e

# type check â€” skip if no .ts files in src/
if compgen -G "src/**/*.ts" > /dev/null 2>&1 || compgen -G "src/*.ts" > /dev/null 2>&1; then
  bunx tsc --noEmit
fi

# tests
./dev/test

echo "pre_flight: ok" >&2
